class DBHelper{fetchRestaurantById(e,t){window.idb.openDb().then(()=>{window.idb.getById(e).then(e=>{t(null,e)})}).catch(e=>{t(e,null)})}fetchRestaurantByCuisineAndNeighborhood(e,t,n){window.idb.openDb().then(()=>{if("all"==t&&"all"==e)window.idb.getAll().then(e=>{n(null,e)});else{let r=[],i=[];"all"!=t&&(r.push("neighborhood"),i.push(t)),"all"!=e&&(r.push("cuisine_type"),i.push(e)),1==i.length&&(i=i.join("")),window.idb.getByIndex(r.join("_"),i).then(e=>{n(null,e)})}}).catch(e=>{n(e,null)})}fetchNeighborhoods(e){window.idb.openDb().then(()=>{window.idb.getAll().then(t=>{const n=t.map((e,n)=>t[n].neighborhood),r=n.filter((e,t)=>n.indexOf(e)==t);e(null,r)})}).catch(t=>{e(t,null)})}fetchCuisines(e){window.idb.openDb().then(()=>{window.idb.getAll().then(t=>{const n=t.map((e,n)=>t[n].cuisine_type),r=n.filter((e,t)=>n.indexOf(e)==t);e(null,r)})}).catch(t=>{e(t,null)})}urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}imageUrlForRestaurant(e){return`/img/${e.photograph}`}imageSrcsetForRestaurant(e,t){const n=e.photograph.replace(".jpg","");return`/img/${n}_200.${t} 200w, /img/${n}_300.${t} 300w, /img/${n}_400.${t} 400w, /img/${n}.${t} 800w`}pictureForRestaurant(e,t,n){t.photograph||(t.photograph="noimg.jpg");const r=document.createElement("source");r.srcset=this.imageSrcsetForRestaurant(t,"webp"),r.sizes=n,r.type="image/webp",e.append(r);const i=document.createElement("img");return i.src=this.imageUrlForRestaurant(t,"jpg"),i.srcset=this.imageSrcsetForRestaurant(t,"jpg"),i.sizes=n,i.width=800,i.alt=`${t.name} located in ${t.neighborhood}`,i.className="restaurant-img",e.append(i),e}mapMarkerForRestaurant(e){return new google.maps.Marker({position:e.latlng,title:e.name,url:this.urlForRestaurant(e),map:window.map,animation:google.maps.Animation.DROP})}ratingHtmlForRestaurant(e){let t="";for(let n=1;n<6;++n)t+=e>=n?"★":"☆";return t}}window.dbhelper=new DBHelper;